<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Ejercicio 14 de programacion Web</title>
        <link rel="shortcut icon" type="image/png" href="favicon.png" />
        <meta name="description" content="Free Web tutorials" />
        <meta name="keywords" content="HTML,CSS,XML,JavaScript" />
        <meta name="author" content="Francisco Mendez" />
        <meta charset="UTF-8" />
        <style type="text/css">@import url(js/calendar-blue.css);</style>
		<script type="text/javascript" src="js/calendar.js"></script>
		<script type="text/javascript" src="js/calendar-setup.js"></script>
		<script type="text/javascript" src="js/lang/calendar-es.js"></script>
        
        
                

        
        <style type="text/css">
        	#error{
        		z-index:100;
     			display:none;
      			background-color:#ED2B2B;
      			width:300px;
      			height:20px;
      			position:absolute;
      			left:350px;
      			margin-top:20px;
      			text-align:center;
      			vertical-align:middle;
        	}
        	
        	input.telefonoClase{
        		display: inline;
        	}
        	
        	input[type="text"]{
        		left: 200px;
        	}
        	label{
/*        		padding-right:200px;*/
        	}
        </style>
        
        
    </head>
    <body>
        <h1>Antes de finalizar el registro</h1>
            <form name="registro" method="post" action="#" onSubmit="return validaFormulario();">
            <div id="error">
		    		hola
    			</div>
            <fieldset>
                <fieldset>


                            <label for="correo">
                                Correo
                            </label>

                            <input type="email" id="correo" name="correo" disabled="disabled" value="alguncorreo@algo.com" />

                            <label for="usuario">
                                Usuario
                            </label>

                            <input type="text" id="usuario" name="usuario" disabled="disabled" value="algunNombre" />


                    </fieldset>
                    <fieldset>

<p>¿Porque se ha registrado?</p>

                            <input type="checkbox" name="intereses" id="cb1" value="Autos" />Invitación 
                            <br/>
                            <input type="checkbox" name="intereses" id="cb2" value="Tecnología" />Curiosidad
                            <br/>
                            <input type="checkbox" name="intereses" id="cb3" value="Programación" />Temas de interés
                            <br/>
                            <input type="checkbox" name="intereses" id="cb4" value="Viajes" />Descargar contenido
                            <br/>
                            <input type="checkbox" name="intereses" id="cb5" value="Noticias" />Conocer gente
                            <br/>
                            <input type="checkbox" name="intereses" id="cb6" value="Ciencia" />Ayudar en foros
                            <br/>

                    </fieldset>
					<fieldset id="fsDatos">

<p>Datos personales</p>

                            <label for="nombre">
                                Nombre Completo
                            </label>

                           <input type="text" id="nombre" name="nombre" />
							 <br />
                            <label for="direccion">
                                Dirección
                            </label>

                            <input type="text" id="direccion" name="direccion" />
							 <br />
                            <label for="telefono">
                                Teléfono(s)
                            </label>

                            <input type="tel" id="telefono" name="telefono" class="telefonoClase" />
							<input type="button" id="add" name="add" value="Agregar" onClick="agregaTel()" />
                            
                            <br id="naci" />
                            <br />

                            <label for="nac">
                                Fecha de nacimiento
                            </label>
					
                            <input type="text" id="nac" name="nac" readonly="readonly" />
	
                            <img src="js/img.gif" id="trigger" alt="cal" />
							 <br />
                            <label for="sexo1">
                                Sexo
                            </label>

							<input type="radio" name="sexo" id="sexo1" value="hombre" />Hombre
							<input type="radio" name="sexo" id="sexo2" value="mujer" />Mujer <br/>

                </fieldset>
                <fieldset>

                			<p>Seleccione una imágen y reingrese su contraseña</p>

		                        <label for="imagen">
		                            Imágen
		                        </label>

								<input type="file" accept="image/*" name="imagen" id="imagen" />

                            <label for="pass">
                                Contraseña
                            </label>

                            <input type="password" id="pass" name="pass" />

                </fieldset>
                <button type="submit">Terminar registro</button>
                <button type="reset">Limpiar</button>
                </fieldset>
            </form>


		<script type="text/javascript">
			var telefonos = 1;
		
			function eliminaTel(idBtn,idTel,idNl){
				var eleBtn = document.getElementById(idBtn);
				var eleTel = document.getElementById(idTel);
				var eleNl = document.getElementById(idNl);
				var fs = document.getElementById('fsDatos');
				
				fs.removeChild(eleBtn);
				fs.removeChild(eleTel);
				fs.removeChild(eleNl);
				
			}
		
			function agregaTel(){
				var tel = document.createElement('input');
				var nl = document.createElement('br');
				var tels = document.getElementsByTagName('input');
				var btn = document.createElement('input');
				
				nl.id = "nl"+telefonos;
				
				tel.type = 'tel';
				tel.name = 'telefono'+telefonos;
				tel.id = 'telefono'+telefonos;
				tel.class= 'telefonoClase';				
				
				btn.setAttribute('type','button');
				btn.id = 'btnTel'+telefonos;
				btn.name = 'btnTel'+telefonos;
				btn.setAttribute('value','Eliminar');
				btn.onclick = function(){
					eliminaTel(btn.id,tel.id,nl.id);
				}


				
				var nacimiento = document.getElementById('naci');
				
				var fs = document.getElementById('fsDatos');
				fs.insertBefore(nl,nacimiento);
				fs.insertBefore(tel,nacimiento);
				fs.insertBefore(btn,nacimiento);
				telefonos++;

			}
		</script>
		        <script type="text/javascript">

        	
        	function verificaTelefonos(){
        		console.log("llegue aqui");
				var regExTel = /[\d]{10}/;
				var valRetorno = true;
				var tels = document.getElementsByTagName('input');
				
				for(i = 0 ; i < tels.length;i++){
					console.log(tels[i].value);
					if(tels[i].type=='tel'){
						if(tels[i].value.length!=10 || !tels[i].value.match(regExTel)){
							valRetorno = false;
							tels[i].focus();
							break;
				   		}
			   		}
	       		}
        		return valRetorno;
        	}
        	
        	
			function validaFormulario(){
				var valRet;
				var regEx = /[\d]{10}/;
				var regExTel = /(30|31|([12][0-9])|(0[1-9]))\-(11|12|10|(0[1-9]))\-([0-9]{4})/;
				var regExIma = /(.bmp$)|(.jpg$)|(.BMP$)|(.JPG$)|(.jpeg$)|(.JPEG$)|(.gif$)|(.GIF$)|(.png$)|(.PNG$)/;

	        	if(!document.getElementById('cb1').checked &&
	        		!document.getElementById('cb2').checked &&
	        		!document.getElementById('cb3').checked &&
	        		!document.getElementById('cb4').checked &&
	        		!document.getElementById('cb5').checked &&
	        		!document.getElementById('cb6').checked){
	        		document.getElementById('error').style.marginTop = '175px';
	        		document.getElementById('error').style.display='block';
	        		document.getElementById('error').innerHTML = "Debe seleccionar al menos una opción";
	        		//registro.nick.focus();
	        		setTimeout("document.getElementById('error').style.display='none';",4000);
	        		valRet = false;
	        	}
	        	else
	        	if(registro.nombre.value.length==0){
	        		document.getElementById('error').style.marginTop = '349px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "Escribe tu nombre completo";
		    		registro.nombre.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		valRet = false;
	       		}
	       		
	        	else
	        	if(registro.direccion.value.length==0){
	        		document.getElementById('error').style.marginTop = '380px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "Escribe tu dirección";
		    		registro.direccion.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		valRet = false;
	       		}
	        	
	        	else
	        	if(verificaTelefonos() == false){
	        		document.getElementById('error').style.marginTop = '410px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "Teléfono consta de 10 dígitos";
		    		/*registro.telefono.focus();*/
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		valRet = false;
	       		}
	       		
	       		else
	       		if(registro.nac.value.length!=10 || !registro.nac.value.match(regExTel)){
	        		document.getElementById('error').style.marginTop = '440px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "La fecha lleva el formato: DD-MM-AAAA";
		    		registro.nac.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		
		    		valRet = false;
	       		}
	       		
	       		else
	       		if(!document.getElementById("sexo1").checked && !document.getElementById("sexo2").checked){
	        		document.getElementById('error').style.marginTop = '480px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "Elija el sexo";
		    		registro.nac.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		
		    		valRet = false;
	       		}
	       		else
	       		if(registro.imagen.value.length==0){
	        		document.getElementById('error').style.marginTop = '560px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "Elija un archivo válido de imágen";
		    		registro.nac.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		
		    		valRet = false;
	       		}
	       		
	       		else
	       		if(!registro.imagen.value.match(regExIma)){
	        		document.getElementById('error').style.marginTop = '560px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "La extensión del archivo no es válida";
		    		registro.nac.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		
		    		valRet = false;
	       		}
	       		else
	       		if(registro.pass.value.length==0){
	       			document.getElementById('error').style.left = '550px';
	        		document.getElementById('error').style.marginTop = '622px';
		    		document.getElementById('error').style.display='block';
		    		document.getElementById('error').innerHTML = "Reingrese su contraseña";
		    		registro.nac.focus();
		    		setTimeout("document.getElementById('error').style.display='none';",4000);
		    		
		    		valRet = false;
	       		}
	        	
	        	return valRet;
			}
			
			window.onload = function() {
			  Calendar.setup({
				inputField: "nac",
				ifFormat:   "%d-%m-%Y",
				button:     "trigger"
			  });
			}
			
			
        </script>
            
    </body>
</html>
